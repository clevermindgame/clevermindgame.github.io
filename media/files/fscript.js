const e=document.getElementById("impostazioni"),l=document.getElementById("myDialog"),t=document.getElementById("cancelButton"),o=document.getElementById("okButton");function r(e){for(localStorage.setItem("selectedOption1","gioco"),lato=n-2,maxMossa=lato*lato*8,maxPezzi=maxPezziBoard[n-6]+Number(espertoV),maxLoop=8*n,i=0;i<8;i++)vertP[i]=2;for(i=0;i<8;i++)orizzP[i]=2;for(i=0;i<64;i++)inserito[i]=!1;for(i=0;i<8;i++)ninserim[i]=2;for(e=(a*e+0)%mul,maxPezzi-=e%3,npezzi=0,nloop=0;npezzi<maxPezzi&&nloop<maxLoop;)if(nloop+=1,e=(a*e+0)%mul,mossa=Math.floor(e/128)%maxMossa,pezzo=mossa%8,cella=(mossa-pezzo)/8,colonna=cella%lato,riga=(cella-colonna)/lato+1,colonna+=1,0!=vertP[colonna]&&0!=orizzP[riga]&&0!=ninserim[pezzo]&&!inserito[cella]){switch((e=(a*e+0)%mul)%3>0&&1==espertoV&&(1==riga&&pezzo<6&&(pezzo|=1),riga==lato&&pezzo<6&&(pezzo&=6),1==colonna&&pezzo>1&&(4==pezzo||5==pezzo?pezzo&=6:pezzo|=1),colonna==lato&&pezzo>1&&(4==pezzo||5==pezzo?pezzo|=1:pezzo&=6)),cellaID=riga*n+colonna,npezzi+=1,ninserim[pezzo]-=1,inserito[cella]=!0,vertP[colonna]-=1,orizzP[riga]-=1,pezzoH='<img src="media/files/'+iconePezzi[temaV][pezzo]+'.png" style="width="100%" height="100%">',pezzo){case 0:cellaRegole[cellaID]=[-1,0,-1,0,1];break;case 1:cellaRegole[cellaID]=[1,0,-1,0,1];break;case 2:cellaRegole[cellaID]=[-1,-1,1,0,2];break;case 3:cellaRegole[cellaID]=[1,1,1,0,-2];break;case 4:cellaRegole[cellaID]=[-1,1,1,0,3];break;case 5:cellaRegole[cellaID]=[1,-1,1,0,-3];break;case 6:cellaRegole[cellaID]=[0,-1,1,1,1];break;case 7:cellaRegole[cellaID]=[0,1,1,-1,1]}cellaPezzo[cellaID]=pezzo,cellaHTML[cellaID]=pezzoH,document.getElementById(cellaID).innerHTML=pezzoH}for(celle=document.getElementsByClassName("cinterno"),i=0;i<celle.length;i++)cellaVSBL[celle[i].id]||(celle[i].innerHTML="");daIndovinare=npezzi,document.getElementById("mostra").textContent="Mostra",mostra=!1}function d(e){mostra=!0,document.getElementById("mostra").textContent="Nascondi",scacchiera=document.getElementById("scacchiera");scacchiera.rows[0];for(i=scacchiera.rows.length-1;i>=0;i--)scacchiera.deleteRow(i);for(lcella=Math.trunc((wWindow*scacchieraW/100-e-1)/e),charSize=Math.trunc(lcella/3),i=0;i<e;i++){let l=scacchiera.insertRow(i);for(j=0;j<e;j++){let t=l.insertCell(j);t.id=e*i+j,t.classList.add("cinterno"),t.style.fontSize=charSize+"px",cellaHTML[e*i+j]="",cellaVSBL[e*i+j]=!1,cellaRegole[e*i+j]=["","",1,0,1],cellaPezzo[e*i+j]=8,0!=j&&j!=e-1||(t.classList.replace("cinterno","cbordoV"),cellaHTML[e*i+j]=String.fromCharCode(j+65,i+49),t.innerHTML=cellaHTML[e*i+j],cellaVSBL[e*i+j]=!0),0!=i&&i!=e-1||(t.classList.replace("cinterno","cbordoH"),cellaHTML[e*i+j]=String.fromCharCode(j+65,i+49),t.innerHTML=cellaHTML[e*i+j],cellaVSBL[e*i+j]=!0),0!=i&&i!=e-1||0!=j&&j!=e-1||(t.classList.replace("cbordoV","cangolo"),t.classList.replace("cbordoH","cangolo"),cellaHTML[e*i+j]=String.fromCharCode(j+65,i+49),t.innerHTML=cellaHTML[e*i+j],cellaVSBL[e*i+j]=!0)}}for(celle=document.getElementsByTagName("td"),i=0;i<celle.length;i++)celle[i].style.height=lcella+"px",celle[i].style.width=lcella+"px";idStart=0,idEnd=0,nmosse=0,daIndovinare=0}function g(){celle_b=document.querySelectorAll(".cbordoV, .cbordoH"),dialogB=document.getElementById("bordoDialog"),celle_b.forEach((e=>{e.addEventListener("click",(()=>{cella=e,cellaID=e.id,"studio"!=modalitaV&&0!=mostra||dialogB.showModal()}))})),celle_s=document.querySelectorAll(".cinterno"),dialogS=document.getElementById("imageDialog"),celle_s.forEach((e=>{e.addEventListener("click",(()=>{cella=e,cellaID=e.id,("studio"==modalitaV||0==mostra&&daIndovinare>0)&&dialogS.showModal()}))}))}function p(e){modalitaV=e,localStorage.setItem("selectedOption1",e),document.getElementById("modo").innerHTML="modalit√†: <b>"+modalitaV+'</b> ‚Äî <a href="https://clevermindgame.github.io/help.html#'+modalitaV+'" target="_blank">Help</a>',"studio"==modalitaV&&(document.getElementById("image0").style.visibility="visible",document.getElementById("mostra").disabled=!1),"gioco"==modalitaV&&(d(n),document.getElementById("image0").style.visibility="hidden",document.getElementById("mostra").disabled=!0)}function b(){for(cellaID=65,v(),celle=document.querySelectorAll(".cbordoV, .cbordoH, .cangolo"),k=0;k<celle.length;k++)j=celle[k].id%n,i=(celle[k].id-j)/n,cellaHTML[celle[k].id]=String.fromCharCode(j+65,i+49),celle[k].innerHTML=cellaHTML[celle[k].id],celle[k].style.fontSize=charSize+"px"}function h(){if(mostra){for(celle=document.getElementsByClassName("cinterno"),i=0;i<celle.length;i++)cellaVSBL[celle[i].id]||(celle[i].innerHTML="");document.getElementById("mostra").textContent="Mostra"}if(!mostra){for(celle=document.getElementsByClassName("cinterno"),i=0;i<celle.length;i++)celle[i].innerHTML=cellaHTML[celle[i].id];document.getElementById("mostra").textContent="Nascondi"}mostra=!mostra}function u(){V.innerHTML=""}function f(e,l){if(mostra){switch(cellaHTML[cellaID]=e,cella.innerHTML=cellaHTML[cellaID],v(),l){case 0:cellaRegole[cellaID]=[-1,0,-1,0,1];break;case 1:cellaRegole[cellaID]=[1,0,-1,0,1];break;case 2:cellaRegole[cellaID]=[-1,-1,1,0,2];break;case 3:cellaRegole[cellaID]=[1,1,1,0,-2];break;case 4:cellaRegole[cellaID]=[-1,1,1,0,3];break;case 5:cellaRegole[cellaID]=[1,-1,1,0,-3];break;case 6:cellaRegole[cellaID]=[0,-1,1,1,1];break;case 7:cellaRegole[cellaID]=[0,1,1,-1,1];break;case 8:cellaRegole[cellaID]=["","",1,0,1]}cellaPezzo[cellaID]=l}mostra||(nmosse+=1,e==cellaHTML[cellaID]?(cellaVSBL[cellaID]=!0,cella.innerHTML=cellaHTML[cellaID],daIndovinare-=1,0===daIndovinare?(B.innerHTML="Bravo! Hai risolto la sfida in "+nmosse+" mosse<br>",H.showModal(),V.insertAdjacentHTML("afterbegin","<em>"+nmosse+" </em>Bravo! Hai trovato tutti i pezzi. <br />")):(1===daIndovinare?(quantiR="Indovinato! rimane ",quantiP=" pezzo"):(quantiR="Indovinato! rimangono ",quantiP=" pezzi"),V.insertAdjacentHTML("afterbegin",nmosse+" | "+quantiR+daIndovinare+quantiP+"<br />"))):V.insertAdjacentHTML("afterbegin",nmosse+" | Sbagliato! Riprova.<br />"))}function z(e){const l=[];for(let t=0;t<e.length;t++){const o=e[t];Array.isArray(o)?l[t]=z(o):l[t]="object"==typeof o&&null!==o?deepCopyObject(o):o}return l}function I(e,l,t){v(),idStart=e,cellaHTML[e]="<em>"+cellaHTML[e]+"</em>",document.getElementById(e).style.fontSize=Math.trunc(8*charSize/9)+"px",npassi=0,nrimbalzi=0,cellaRegoleTemp=z(cellaRegole),j=e%n,i=Math.round((e-j)/n),segno="",l>0?segno="+":l<0&&(segno="‚Äí"),valstring='<span class="intero bianco">&nbsp;'+segno+Math.abs(l)+"&nbsp;</span>&nbsp;in ",nmosse+=1,cin='<span style="line-height: 160%; margin: 0;">'+nmosse+" | "+valstring+"<b>"+String.fromCharCode(j+65,i+49)+"</b>"+diventaIcon,0==i&&(stato=[1,0,l,t]),i==n-1&&(stato=[-1,0,l,t]),0==j&&(stato=[0,1,l,t]),j==n-1&&(stato=[0,-1,l,t]),regola=cellaRegoleTemp[e];do{rimb=!1,""===regola[0]?ii=stato[0]:(rimb=!0,ii=regola[0]),""===regola[1]?jj=stato[1]:(rimb=!0,jj=regola[1]),rimb&&(nrimbalzi+=1),cellaRegoleTemp[n*i+j]=["","",1,0,1],i+=ii,j+=jj,t*=regola[2],l=(l+regola[3])*regola[4],stato=[ii,jj,l,t],regola=cellaRegoleTemp[n*i+j],npassi+=1}while(0!=i&i!=n-1&0!=j&j!=n-1);switch(idEnd=n*i+j,uscita=1===t?'<img src="media/files/uscita_bianca.png" style="width="100%" height="100%">':'<img src="media/files/uscita_nera.png" style="width="100%" height="100%">',document.getElementById(idEnd).innerHTML=uscita,l>0?l="+"+l:l<0&&(l="‚Äí"+-l),valstring=1===t?'<span class="intero bianco">&nbsp;'+l+"&nbsp;</span>&nbsp;in ":'<span class="intero nero">&nbsp;'+l+"&nbsp;</span>&nbsp;in ",cout=valstring+"<b>"+String.fromCharCode(j+65,i+49)+"</b>",livelloV){case"passirimb":cout+=" | "+npassi+passiIcon+"e "+nrimbalzi+rimbalziIcon+"<br />";break;case"passi":cout+=" | "+npassi+passiIcon+"<br />";break;case"rimb":cout+=" | "+nrimbalzi+rimbalziIcon+"<br />";break;case"nulla":cout+="<br />"}V.insertAdjacentHTML("afterbegin",cin+cout+"</span>")}function v(){"undefined"!=typeof idStart&&cellaID!=idStart&&(document.getElementById(idStart).innerHTML=cellaHTML[idStart]),"undefined"!=typeof idEnd&&cellaID!=idEnd&&(document.getElementById(idEnd).innerHTML=cellaHTML[idEnd])}function y(){for(temaV=localStorage.getItem("selectedOption4"),document.getElementsByClassName("logo-container")[0].style.backgroundColor=temaC[temaV][0],document.getElementById("titolo").style.color=temaC[temaV][2],document.getElementById("storico").style.backgroundColor=temaC[temaV][3],document.querySelectorAll(".cbordoV, .cbordoH").forEach((e=>{e.style.backgroundColor=temaC[temaV][1],e.style.color=temaC[temaV][2]})),document.querySelectorAll(".cangolo").forEach((e=>{e.style.backgroundColor=temaC[localStorage.getItem("selectedOption4")][0],e.style.color=temaC[localStorage.getItem("selectedOption4")][2]})),elements=document.querySelectorAll(".pezzi"),elements.forEach((e=>{src=e.getAttribute("src"),null!==src&&src.includes(".png")&&(newSrc=src.replace(/\d\.png/g,temaV+".png"),e.setAttribute("src",newSrc))})),celle=document.getElementsByClassName("cinterno"),i=0;i<celle.length;i++)src=cellaHTML[celle[i].id],src.includes(".png")&&(newSrc=src.replace(/\d\.png/g,temaV+".png"),cellaHTML[celle[i].id]=newSrc,""!=celle[i].innerHTML&&(celle[i].innerHTML=celle[i].innerHTML.replace(/\d\.png/g,temaV+".png")))}function S(){return totPassi=0,totRimb=0,maxPassi=0,maxRimb=0,pochiPassi=0,pochiRimb=0,listaCelle=document.querySelectorAll(".cbordoV, .cbordoH"),listaCelle.forEach((e=>{cellaID=e.id,valPercorso=function(e){idStart=e,idxPassi=0,idxRimbalzi=0,cellaRegoleTemp=z(cellaRegole),j=e%n,i=Math.round((e-j)/n),0==i&&(stato=[1,0,1,1]),i==n-1&&(stato=[-1,0,1,1]),0==j&&(stato=[0,1,1,1]),j==n-1&&(stato=[0,-1,0,1]),regola=cellaRegoleTemp[e];do{rimb=!1,""===regola[0]?ii=stato[0]:(rimb=!0,ii=regola[0]),""===regola[1]?jj=stato[1]:(rimb=!0,jj=regola[1]),rimb&&(idxRimbalzi+=1),cellaRegoleTemp[n*i+j]=["","",1,0,1],i+=ii,j+=jj,stato=[ii,jj,1,1],regola=cellaRegoleTemp[n*i+j],idxPassi+=1}while(0!=i&i!=n-1&0!=j&j!=n-1);return[idxPassi,idxRimbalzi]}(cellaID),totPassi+=valPercorso[0],totRimb+=valPercorso[1],valPercorso[0]>maxPassi&&(maxPassi=valPercorso[0]),valPercorso[1]>maxRimb&&(maxRimb=valPercorso[1]),valPercorso[0]<5&&(pochiPassi+=1),valPercorso[1]<2&&(pochiRimb+=1)})),idxVal=2*(totPassi+5*maxPassi)+10*(totRimb+5*maxRimb)-10*(pochiPassi+2*pochiRimb)+5*daIndovinare,idxVal<350?"facile":idxVal>350&&idxVal<=600?"media":idxVal>600?"difficile":void 0}modalita=document.getElementsByName("modalita"),dimensioni=document.getElementsByName("dimensioni"),esperto=document.getElementsByName("esperto"),livello=document.getElementsByName("livello"),tema=document.getElementsByName("tema"),temaC=[["#1977a7","#3fb5cc","#ffffff","#fcf9ed"],["#d62628","#ef7f13","#ffffff","#fcf9ed"],["#3daf1e","#9dc31a","#ffffff","#fcf9ed"]],iconePezzi=[["cb0","cn0","tb0","tn0","rb0","rn0","qb0","qn0"],["cb1","cn1","tb1","tn1","rb1","rn1","qb1","qn1"],["cb2","cn2","tb2","tn2","rb2","rn2","qb2","qn2"]],vertP=new Array(8),orizzP=new Array(8),inserito=new Array(64),ninserim=new Array(8),cellaHTML=new Array(64),cellaVSBL=new Array(64),cellaRegole=new Array(64),cellaRegoleTemp=new Array(64),cellaPezzo=new Array(64),maxPezziBoard=new Array(3),maxPezziBoard=[6,8,10],maxLinea=2,np=8,diventaIcon=" &#9654; ",diventaIcon=" ‚ûú ",passiIcon=" üö∂ ",rimbalziIcon=" ‚Ü∫ ",a=16807,c=0,mul=Math.pow(2,31)-1,verbose=!1,document.getElementById("run").addEventListener("click",(function(){n=localStorage.getItem("selectedOption2"),d(n),g(),y(),u(),"gioco"==modalitaV&&(seme=Math.floor(Math.random()*mul),r(seme),infoM="√à pronta una nuova sfida!<br><br>Pezzi da indovinare "+daIndovinare+"<br>",infoM+="Difficolt√†: "+S()+espertoMsg+"<br><br>",infoM+="<em>(passi:"+passiIcon+"- rimbalzi:"+rimbalziIcon+")</em><br>",infoM+=idxVal+"<br>",B.innerHTML=infoM,H.showModal())})),document.getElementById("god").addEventListener("click",(function(){p("gioco"),g(),y(),today=new Date,seme=espertoV+today.getDate()+today.getDay()+today.getMonth()+today.getFullYear()%100,r(seme),u(),infoM="Gioco di oggi!<br><br>Pezzi da indovinare: "+daIndovinare+"<br>",infoM+="Difficolt√†: "+S()+espertoMsg+"<br><br>",infoM+="<em>(passi:"+passiIcon+"- rimbalzi:"+rimbalziIcon+")</em><br>",infoM+=idxVal+"<br>",B.innerHTML=infoM,H.showModal()})),document.getElementById("copia").addEventListener("click",(function(){for(dumpCelle="",i=0;i<n*n;i++)dumpCelle+=cellaPezzo[i];dumpStr=dumpCelle.replace(/(\d)\1{0,8}/g,(function(e){return e.length+String.fromCharCode(Number(e.charAt(0))+108)})),testoCopiato="https://clevermindgame.github.io/gioca.html?s="+dumpStr+"&m="+mostra,navigator.clipboard.writeText(testoCopiato).then((()=>{}),(()=>{})),B.innerHTML="<b>Hai copiato il gioco da condividere!</b>",H.showModal()})),document.getElementById("mostra").addEventListener("click",(function(){h()}));const M=window.location.search,L=new URLSearchParams(M);s=L.get("s"),m=L.get("m");const w=new RegExp("^([0-9][l-t])+$","g");if(sErr=!1,null!=s)if(w.test(s)){const e=s.match(/\d/g),l=s.match(/[A-Za-z]/g);dumpRicostr="";for(let t=0;t<e.length;t++)dumpRicostr+=String.fromCharCode(l[t].charCodeAt(0)-60).repeat(parseInt(e[t]));s=dumpRicostr}else s=null,sErr=!0;if(hWindow=window.innerHeight,wWindow=window.innerWidth,wWindow>hWindow){var E=document.querySelector(".gioco-container");wWindow=Math.round(3.8*hWindow/7),E.style.width=wWindow+"px"}rWindow=hWindow/wWindow,scacchieraW=Math.round(75+22*(rWindow-1.4)/.4),logoH=Math.round(40+22*(rWindow-1.4)/.4),rWindow<1.4&&(scacchieraW=75,logoH=40),rWindow>1.8&&(scacchieraW=97,logoH=60),scacchiera.style.width=scacchieraW+"%",hWindow<700&&(document.getElementsByClassName("logo-container")[0].style.height=logoH+"px",document.getElementsByClassName("logo-image")[0].style.width=logoH+"px",document.getElementsByClassName("logo-image")[0].style.height=logoH+"px",logoI.style.width=logoH+"px",logoI.style.height=logoH+"px"),localStorage.getItem("selectedOption1")||localStorage.setItem("selectedOption1","gioco"),localStorage.getItem("selectedOption2")||localStorage.setItem("selectedOption2",7),localStorage.getItem("selectedOption3")||localStorage.setItem("selectedOption3","passirimb"),localStorage.getItem("selectedOption4")||localStorage.setItem("selectedOption4",0),localStorage.getItem("selectedOption5")||localStorage.setItem("selectedOption5",0),localStorage.getItem("benv")||localStorage.setItem("benv",1),modalitaV=localStorage.getItem("selectedOption1"),n=localStorage.getItem("selectedOption2"),livelloV=localStorage.getItem("selectedOption3"),temaV=localStorage.getItem("selectedOption4"),p(modalitaV),espertoV=localStorage.getItem("selectedOption5"),espertoMsg="",1==espertoV&&(espertoMsg=" (livello esperto)");const H=document.querySelector("#infoGioco"),T=document.querySelector("#okB"),B=document.querySelector("#infoTesto");T.addEventListener("click",(()=>{H.close()})),null!=s&&36!=s.length&&49!=s.length&&64!=s.length&&(sErr=!0),sErr&&(B.innerHTML="La disposizione che vuoi caricare contiene degli errori",H.showModal()),null==s||36!=s.length&&49!=s.length&&64!=s.length?(s=0,d(n),"studio"==modalitaV&&1==localStorage.getItem("benv")&&(B.innerHTML="Benvenuto! Sei in modalit√† <b>Studio</b>.<br><br>            Qui puoi creare una tua sfida, scegliendo i pezzi da inserire.<br>            Entra nelle Impostazioni per passare in modalit√† <b>Gioco</b>, cambiare la dimensione della scacchiera o il tema grafico.<br>            Buon divertimento!",H.showModal()),"gioco"==modalitaV&&1==localStorage.getItem("benv")&&(B.innerHTML="Benvenuto! Sei in modalit√† <b>Gioco</b>.<br><br>            Tocca <b>Nuovo</b> per accettare una nuova sfida, o l'icona del calendario per la sfida del giorno.<br>            Entra nelle Impostazioni per passare in modalit√† <b>Studio</b>, cambiare la dimensione della scacchiera o il tema grafico.<br>            Buon divertimento!",H.showModal()),localStorage.setItem("benv",1)):function(){switch(s.length){case 36:n=6;break;case 49:n=7;break;case 64:n=8}for(p("gioco"),cellaID=0;cellaID<s.length;cellaID++)if(pBordo=!1,pezzo=1*s.charAt(cellaID),cellaID%n!=0&&cellaID%n!=n-1)if(cellaID<n)8!=pezzo&&(sErr=!0);else if(cellaID>=n*(n-1))8!=pezzo&&(sErr=!0);else{switch(pezzoH='<img src="media/files/'+iconePezzi[temaV][pezzo]+'.png" style="width="100%" height="100%">',pezzo){case 0:cellaRegole[cellaID]=[-1,0,-1,0,1];break;case 1:cellaRegole[cellaID]=[1,0,-1,0,1];break;case 2:cellaRegole[cellaID]=[-1,-1,1,0,2];break;case 3:cellaRegole[cellaID]=[1,1,1,0,-2];break;case 4:cellaRegole[cellaID]=[-1,1,1,0,3];break;case 5:cellaRegole[cellaID]=[1,-1,1,0,-3];break;case 6:cellaRegole[cellaID]=[0,-1,1,1,1];break;case 7:cellaRegole[cellaID]=[0,1,1,-1,1];break;default:pezzoH=""}""!=pezzoH&&(daIndovinare+=1,cellaPezzo[cellaID]=pezzo,cellaHTML[cellaID]=pezzoH,document.getElementById(cellaID).innerHTML=pezzoH)}else 8!=pezzo&&(sErr=!0);"true"==m?mostra=!1:mostra=!0,h(),localStorage.setItem("benv",0),1===daIndovinare?quantiP=" pezzo":quantiP=" pezzi",infoM="Hai importato una sfida!<br><br>Pezzi da indovinare: "+daIndovinare+"<br>",infoM+="Difficolt√†: "+S()+"<br><br>",infoM+="<em>(passi:"+passiIcon+"- rimbalzi:"+rimbalziIcon+")</em><br>",infoM+=idxVal+"<br>",sErr&&(infoM+="<br><br><em>La disposizione conteneva degli errori</em><br>"),B.innerHTML=infoM,H.showModal()}();const V=document.getElementById("storico"),D=window.pageYOffset||document.documentElement.scrollTop,P=V.offsetTop,R=hWindow-(P-D)-2;V.style.height=`${R}px`,V.style.fontSize=Math.round(n*lcella*30/13/50)+"px",y(),u(),t.addEventListener("click",(()=>{l.close()})),e.addEventListener("click",(()=>{if(l.showModal(),localStorage.getItem("selectedOption1"))for(let e=0;e<modalita.length;e++)if(modalita[e].value===localStorage.getItem("selectedOption1")){modalita[e].checked=!0;break}if(localStorage.getItem("selectedOption2"))for(let e=0;e<dimensioni.length;e++)if(dimensioni[e].value===localStorage.getItem("selectedOption2")){dimensioni[e].checked=!0;break}if(localStorage.getItem("selectedOption5"))for(let e=0;e<esperto.length;e++)if(esperto[e].value===localStorage.getItem("selectedOption5")){esperto[e].checked=!0;break}if(localStorage.getItem("selectedOption3"))for(let e=0;e<livello.length;e++)if(livello[e].value===localStorage.getItem("selectedOption3")){livello[e].checked=!0;break}if(localStorage.getItem("selectedOption4"))for(let e=0;e<livello.length;e++)if(tema[e].value===localStorage.getItem("selectedOption4")){tema[e].checked=!0;break}})),o.addEventListener("click",(e=>{varia=!1;for(let e=0;e<modalita.length;e++)if(modalita[e].checked){oldopt=localStorage.getItem("selectedOption1"),selectedOption1=modalita[e].value,modalitaV=selectedOption1,localStorage.setItem("selectedOption1",selectedOption1),oldopt!=selectedOption1&&(b(),p(modalitaV));break}for(let e=0;e<dimensioni.length;e++)if(dimensioni[e].checked){oldopt=localStorage.getItem("selectedOption2"),selectedOption2=dimensioni[e].value,oldopt!=selectedOption2&&(varia=!0),localStorage.setItem("selectedOption2",selectedOption2),localStorage.setItem("benv",0);break}for(let e=0;e<esperto.length;e++)if(esperto[e].checked){oldopt=localStorage.getItem("selectedOption5"),selectedOption5=esperto[e].value,espertoV=selectedOption5,espertoMsg="",1==espertoV&&(espertoMsg=" (livello esperto)"),localStorage.setItem("selectedOption5",selectedOption5);break}for(let e=0;e<livello.length;e++)if(livello[e].checked){oldopt=localStorage.getItem("selectedOption3"),selectedOption3=livello[e].value,livelloV=selectedOption3,localStorage.setItem("selectedOption3",selectedOption3);break}for(let e=0;e<tema.length;e++)if(tema[e].checked){oldopt=localStorage.getItem("selectedOption4"),selectedOption4=tema[e].value,localStorage.setItem("selectedOption4",selectedOption4),temaV=selectedOption4,y();break}varia||e.preventDefault(),l.close()})),image0.addEventListener("click",(()=>{"studio"==modalitaV&&f("",8),dialogS.close()})),image1.addEventListener("click",(()=>{f('<img src="media/files/'+iconePezzi[temaV][0]+'.png" style="width="100%" height="100%">',0),dialogS.close()})),image2.addEventListener("click",(()=>{f('<img src="media/files/'+iconePezzi[temaV][1]+'.png" style="width="100%" height="100%">',1),dialogS.close()})),image3.addEventListener("click",(()=>{f('<img src="media/files/'+iconePezzi[temaV][2]+'.png" style="width="100%" height="100%">',2),dialogS.close()})),image4.addEventListener("click",(()=>{f('<img src="media/files/'+iconePezzi[temaV][3]+'.png" style="width="100%" height="100%">',3),dialogS.close()})),image5.addEventListener("click",(()=>{f('<img src="media/files/'+iconePezzi[temaV][4]+'.png" style="width="100%" height="100%">',4),dialogS.close()})),image6.addEventListener("click",(()=>{f('<img src="media/files/'+iconePezzi[temaV][5]+'.png" style="width="100%" height="100%">',5),dialogS.close()})),image7.addEventListener("click",(()=>{f('<img src="media/files/'+iconePezzi[temaV][6]+'.png" style="width="100%" height="100%">',6),dialogS.close()})),image8.addEventListener("click",(()=>{f('<img src="media/files/'+iconePezzi[temaV][7]+'.png" style="width="100%" height="100%">',7),dialogS.close()})),image9.addEventListener("click",(()=>{dialogS.close()})),image10.addEventListener("click",(()=>{cella.innerHTML='<img src="media/files/p1b.png" style="width="100%" height="100%">',I(cellaID,1,1),dialogB.close()})),image12.addEventListener("click",(()=>{cella.innerHTML='<img src="media/files/m1b.png" style="width="100%" height="100%">',I(cellaID,-1,1),dialogB.close()})),image14.addEventListener("click",(()=>{dialogB.close()})),g();